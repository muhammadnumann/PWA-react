import React, { useEffect, useState } from "react";
import "../Components.css";
import LogoIcon from "../../assets/Images/Logo";
import ResponsiveLogo from "../../assets/Images/responsiveLogo";
import { Link, useLocation, useNavigate } from "react-router-dom";
import axios from "axios";

const authFooter = ["/social/profile", "/social/userbio", "/social/setting"];

const SocialAuthLayout = (props) => {
  const { children } = props;
  const navigate = useNavigate();
  const location = useLocation();
  const [currentuserData, setcurrentuserData] = useState();
  useEffect(() => {
    const currentUser = localStorage.getItem("userdata");
    let data = JSON.parse(currentUser);
    setcurrentuserData(data);
    let GetUserUrl = `${process.env.REACT_APP_API_URI}users/${data?._id}`;
    GetUser(GetUserUrl);
  }, []);

  const GetUser = async (GetUserUrl) => {
    try {
      const fetchData = await axios.get(GetUserUrl);
      localStorage.setItem(
        "userdata",
        JSON.stringify(fetchData?.data?.data?.doc)
      );
      setcurrentuserData(fetchData?.data?.data?.doc);
    } catch (error) {
      console.log(error);
    }
  };
  return (
    <div className="registration-layout d-flex flex-column justify-content-start align-items-center">
      <div className="d-sm-none d-flex justify-content-between align-items-center w-100 mobile-header">
        <div className="d-flex flex justify-content-center align-items-center gap-2">
          <svg
            onClick={() => navigate(-1)}
            width={12}
            height={27}
            viewBox="0 0 12 27"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M11.6137 26.0731C12.1288 25.504 12.1288 24.5812 11.6137 24.0121L3.0135 14.5098C2.51295 13.9568 2.51295 13.0432 3.0135 12.4902L11.6137 2.98793C12.1288 2.41879 12.1288 1.49601 11.6137 0.926861C11.0985 0.357712 10.2634 0.357712 9.74825 0.926861L1.14809 10.4291C-0.382695 12.1205 -0.382695 14.8795 1.14809 16.5709L9.74825 26.0731C10.2634 26.6423 11.0985 26.6423 11.6137 26.0731Z"
              fill="#6B6B6B"
            />
          </svg>
          <Link to="/home">
            <ResponsiveLogo />
          </Link>
          <Link to="/home">
            <div>
              <h3 className="text-white font-18 font-weight-700 mb-2">
                GROW AND SHARE
              </h3>
              <p className="text-white font-10">Cannabis Connections, Infinite Selections.</p>
            </div>
          </Link>
        </div>

        <Link
          to="/home"
          className="d-sm-none d-flex gap-1 align-items-center text-primary-green font-weight-600"
        >
          <span className="w-max-content app-heading font-18">
            Grow And Share
          </span>
        </Link>

      </div>
      <div
        className={`${
          location.pathname.includes("/social")
            ? authFooter.includes(location.pathname)
              ? "social-content-footer"
              : "social-content"
            : "content"
        } `}
      >
        <div className="d-sm-flex d-none flex-column justify-content-center align-items-center mb-5 ">
          <LogoIcon />
          <h3 className="text-white pt-3 mt-1 mb-3">GROW AND SHARE</h3>
          <p className="text-white">Cannabis Connections, Infinite Selections.</p>
        </div>
        {children}
      </div>
      {authFooter.includes(location.pathname) && (
        <div className="socil-auth-footer w-100 d-sm-none d-block">
          <div className="sub d-sm-none d-flex">
            <span
              className="cr-p"
              onClick={() => navigate(`/chat/${currentuserData._id}`)}
            >
              <svg
                width={32}
                height={33}
                viewBox="0 0 32 33"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  opacity="0.2"
                  d="M30.7757 16.0013C30.776 18.5953 30.0932 21.1437 28.7959 23.39C27.4987 25.6363 25.6327 27.5014 23.3858 28.7976C21.1388 30.0938 18.5902 30.7754 15.9962 30.7738C13.4022 30.7723 10.8543 30.0876 8.60893 28.7887L2.85607 30.7074C2.63919 30.7797 2.40646 30.7902 2.18395 30.7377C1.96144 30.6852 1.75796 30.5717 1.5963 30.4101C1.43464 30.2484 1.3212 30.0449 1.26869 29.8224C1.21618 29.5999 1.22667 29.3672 1.299 29.1503L3.21764 23.3974C2.08355 21.4358 1.41596 19.2396 1.26653 16.9786C1.1171 14.7177 1.48984 12.4527 2.35591 10.3589C3.22198 8.26503 4.55815 6.39853 6.26105 4.90377C7.96395 3.40901 9.98791 2.32607 12.1763 1.73873C14.3648 1.1514 16.659 1.07542 18.8815 1.51667C21.1039 1.95793 23.1951 2.90459 24.9932 4.2834C26.7913 5.66222 28.248 7.43622 29.2507 9.46815C30.2534 11.5001 30.7752 13.7355 30.7757 16.0013Z"
                  fill="#5D8B2F"
                />
                <path
                  d="M16.005 3.81076e-07C13.2424 -0.00060246 10.5267 0.71405 8.1222 2.0744C5.71771 3.43475 3.70638 5.39444 2.28398 7.76274C0.86157 10.131 0.0765482 12.8273 0.00532042 15.589C-0.0659074 18.3507 0.579086 21.0838 1.87752 23.5223L0.131197 28.7612C-0.0134556 29.195 -0.0344482 29.6604 0.0705727 30.1055C0.175594 30.5505 0.402477 30.9574 0.725795 31.2808C1.04911 31.6041 1.45609 31.831 1.9011 31.936C2.34612 32.041 2.81159 32.02 3.24534 31.8754L8.48431 30.129C10.6303 31.2705 13.0081 31.908 15.4373 31.9932C17.8665 32.0785 20.2832 31.6092 22.5039 30.621C24.7246 29.6328 26.6911 28.1517 28.2539 26.29C29.8168 24.4284 30.935 22.2352 31.5236 19.8769C32.1123 17.5186 32.156 15.0571 31.6513 12.6794C31.1467 10.3017 30.107 8.07021 28.6112 6.15431C27.1154 4.2384 25.2028 2.68844 23.0185 1.62209C20.8342 0.555728 18.4357 0.000997373 16.005 3.81076e-07ZM16.005 29.5413C13.6248 29.5429 11.2863 28.9161 9.22592 27.7242C9.03892 27.6157 8.82665 27.5584 8.61047 27.558C8.47805 27.5581 8.34654 27.5799 8.2212 27.6227L2.46527 29.5413L4.38391 23.7869C4.43922 23.6215 4.45877 23.4463 4.44126 23.2729C4.42375 23.0994 4.36959 22.9316 4.28236 22.7806C2.78987 20.2003 2.19064 17.1995 2.57763 14.2438C2.96462 11.2881 4.3162 8.54269 6.42271 6.43353C8.52921 4.32436 11.2729 2.96932 14.2281 2.57859C17.1833 2.18787 20.1848 2.7833 22.7671 4.27254C25.3494 5.76177 27.368 8.06155 28.5099 10.8151C29.6517 13.5687 29.8529 16.6221 29.0823 19.5017C28.3117 22.3813 26.6124 24.9261 24.2479 26.7414C21.8834 28.5566 18.986 29.5408 16.005 29.5413ZM17.8514 16.0015C17.8514 16.3667 17.7431 16.7237 17.5402 17.0273C17.3373 17.3309 17.049 17.5676 16.7116 17.7073C16.3742 17.8471 16.003 17.8836 15.6448 17.8124C15.2867 17.7411 14.9577 17.5653 14.6995 17.3071C14.4413 17.0489 14.2654 16.7199 14.1942 16.3617C14.1229 16.0036 14.1595 15.6323 14.2992 15.295C14.439 14.9576 14.6756 14.6692 14.9793 14.4664C15.2829 14.2635 15.6399 14.1552 16.005 14.1552C16.4947 14.1552 16.9643 14.3497 17.3106 14.696C17.6568 15.0422 17.8514 15.5119 17.8514 16.0015ZM11.0815 16.0015C11.0815 16.3667 10.9732 16.7237 10.7703 17.0273C10.5674 17.3309 10.2791 17.5676 9.94171 17.7073C9.60433 17.8471 9.2331 17.8836 8.87495 17.8124C8.51679 17.7411 8.18781 17.5653 7.92959 17.3071C7.67138 17.0489 7.49553 16.7199 7.42429 16.3617C7.35305 16.0036 7.38962 15.6323 7.52936 15.295C7.6691 14.9576 7.90575 14.6692 8.20938 14.4664C8.51301 14.2635 8.86998 14.1552 9.23515 14.1552C9.72482 14.1552 10.1944 14.3497 10.5407 14.696C10.887 15.0422 11.0815 15.5119 11.0815 16.0015ZM24.6212 16.0015C24.6212 16.3667 24.513 16.7237 24.3101 17.0273C24.1072 17.3309 23.8188 17.5676 23.4815 17.7073C23.1441 17.8471 22.7729 17.8836 22.4147 17.8124C22.0566 17.7411 21.7276 17.5653 21.4694 17.3071C21.2111 17.0489 21.0353 16.7199 20.9641 16.3617C20.8928 16.0036 20.9294 15.6323 21.0691 15.295C21.2089 14.9576 21.4455 14.6692 21.7491 14.4664C22.0528 14.2635 22.4097 14.1552 22.7749 14.1552C23.2646 14.1552 23.7342 14.3497 24.0805 14.696C24.4267 15.0422 24.6212 15.5119 24.6212 16.0015Z"
                  fill="#5D8B2F"
                />
              </svg>
            </span>
            <span
              className="cr-p"
              onClick={() => navigate(`/social/lookingfor`)}
            >
              <svg
                width={34}
                height={34}
                viewBox="0 0 34 34"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  opacity="0.2"
                  d="M32.691 17.0133C32.6933 19.2157 32.2312 21.3938 31.3349 23.4056C30.4385 25.4173 29.128 27.2175 27.4889 28.6885C26.5034 26.7501 25.0006 25.1224 23.1469 23.9857C21.2933 22.8489 19.1611 22.2475 16.9866 22.2481C18.2808 22.2481 19.5459 21.8643 20.622 21.1453C21.698 20.4263 22.5367 19.4043 23.032 18.2087C23.5273 17.013 23.6568 15.6973 23.4044 14.428C23.1519 13.1587 22.5287 11.9927 21.6135 11.0776C20.6984 10.1625 19.5325 9.53929 18.2632 9.28681C16.9939 9.03433 15.6782 9.16391 14.4825 9.65917C13.2868 10.1544 12.2649 10.9931 11.5459 12.0692C10.8269 13.1453 10.4431 14.4104 10.4431 15.7046C10.4431 17.44 11.1325 19.1044 12.3597 20.3315C13.5868 21.5587 15.2512 22.2481 16.9866 22.2481C14.8121 22.2475 12.6799 22.8489 10.8263 23.9857C8.97258 25.1224 7.46976 26.7501 6.4843 28.6885C4.53803 26.9379 3.06024 24.7285 2.18533 22.2612C1.31041 19.794 1.06612 17.1472 1.47466 14.5615C1.88321 11.9759 2.93164 9.53331 4.52461 7.45602C6.11757 5.37873 8.20454 3.73259 10.5957 2.6673C12.9869 1.60201 15.6065 1.15136 18.2162 1.35632C20.826 1.56129 23.3431 2.41538 25.5386 3.84091C27.7342 5.26645 29.5386 7.21821 30.7877 9.51872C32.0369 11.8192 32.6911 14.3955 32.691 17.0133Z"
                  fill="#5D8B2F"
                />
                <path
                  d="M23.5304 5.23481C23.5304 4.88772 23.6683 4.55485 23.9137 4.30942C24.1591 4.06399 24.492 3.92611 24.8391 3.92611H27.4565V1.30872C27.4565 0.961628 27.5944 0.628756 27.8398 0.383327C28.0852 0.137899 28.4181 1.8596e-05 28.7652 1.8596e-05C29.1123 1.8596e-05 29.4452 0.137899 29.6906 0.383327C29.936 0.628756 30.0739 0.961628 30.0739 1.30872V3.92611H32.6913C33.0384 3.92611 33.3712 4.06399 33.6167 4.30942C33.8621 4.55485 34 4.88772 34 5.23481C34 5.5819 33.8621 5.91477 33.6167 6.1602C33.3712 6.40563 33.0384 6.54351 32.6913 6.54351H30.0739V9.1609C30.0739 9.50799 29.936 9.84086 29.6906 10.0863C29.4452 10.3317 29.1123 10.4696 28.7652 10.4696C28.4181 10.4696 28.0852 10.3317 27.8398 10.0863C27.5944 9.84086 27.4565 9.50799 27.4565 9.1609V6.54351H24.8391C24.492 6.54351 24.1591 6.40563 23.9137 6.1602C23.6683 5.91477 23.5304 5.5819 23.5304 5.23481ZM33.7644 14.1798C34.3623 17.7338 33.8152 21.3859 32.2022 24.6087C30.5892 27.8316 27.9936 30.4584 24.7904 32.1099C21.5871 33.7615 17.9418 34.3523 14.3809 33.797C10.8199 33.2418 7.52759 31.5692 4.9792 29.0208C2.43081 26.4724 0.758242 23.1801 0.20299 19.6191C-0.352261 16.0582 0.238536 12.4129 1.89008 9.20965C3.54162 6.00637 6.16845 3.41083 9.39129 1.7978C12.6141 0.184765 16.2662 -0.362302 19.8202 0.235584C20.16 0.295661 20.4622 0.487447 20.6613 0.769223C20.8603 1.051 20.94 1.39997 20.8831 1.74023C20.8262 2.08049 20.6372 2.3845 20.3573 2.58615C20.0774 2.7878 19.7291 2.87076 19.3884 2.81699C17.3241 2.46974 15.209 2.57648 13.1902 3.12978C11.1714 3.68308 9.29738 4.66966 7.69863 6.02084C6.09987 7.37203 4.81476 9.05538 3.93271 10.9537C3.05067 12.8521 2.5929 14.9198 2.59124 17.0131C2.58814 20.5371 3.88333 23.9387 6.22942 26.5682C7.68899 24.4532 9.74134 22.8169 12.1284 21.8651C10.8462 20.8552 9.9105 19.4708 9.45155 17.9045C8.99259 16.3381 9.03314 14.6677 9.56756 13.1255C10.102 11.5833 11.1037 10.246 12.4334 9.29944C13.7631 8.35294 15.3547 7.84432 16.9869 7.84432C18.6191 7.84432 20.2107 8.35294 21.5404 9.29944C22.8701 10.246 23.8719 11.5833 24.4063 13.1255C24.9407 14.6677 24.9812 16.3381 24.5223 17.9045C24.0633 19.4708 23.1277 20.8552 21.8455 21.8651C24.2325 22.8169 26.2848 24.4532 27.7444 26.5682C30.0905 23.9387 31.3857 20.5371 31.3826 17.0131C31.3826 16.2085 31.3159 15.4052 31.183 14.6116C31.1529 14.4414 31.1568 14.2669 31.1945 14.0982C31.2323 13.9294 31.3031 13.7699 31.4028 13.6287C31.5025 13.4875 31.6293 13.3674 31.7757 13.2755C31.9221 13.1835 32.0853 13.1215 32.2558 13.093C32.4263 13.0644 32.6007 13.07 32.7691 13.1093C32.9375 13.1486 33.0964 13.2208 33.2366 13.3219C33.3769 13.4229 33.4958 13.5508 33.5864 13.698C33.677 13.8453 33.7375 14.009 33.7644 14.1798ZM16.9869 20.9392C18.0223 20.9392 19.0343 20.6322 19.8952 20.057C20.7561 19.4818 21.427 18.6642 21.8232 17.7077C22.2194 16.7511 22.3231 15.6986 22.1211 14.6831C21.9191 13.6677 21.4206 12.7349 20.6885 12.0028C19.9564 11.2707 19.0236 10.7722 18.0082 10.5702C16.9927 10.3682 15.9402 10.4719 14.9836 10.8681C14.0271 11.2643 13.2095 11.9352 12.6343 12.7961C12.0591 13.657 11.7521 14.669 11.7521 15.7044C11.7521 17.0927 12.3036 18.4242 13.2854 19.4059C14.2671 20.3877 15.5986 20.9392 16.9869 20.9392ZM16.9869 31.4088C20.1824 31.412 23.2872 30.3467 25.8075 28.3824C24.8608 26.9017 23.5566 25.6832 22.0151 24.8392C20.4735 23.9952 18.7444 23.5527 16.9869 23.5527C15.2295 23.5527 13.5003 23.9952 11.9588 24.8392C10.4173 25.6832 9.11303 26.9017 8.16629 28.3824C10.6867 30.3467 13.7915 31.412 16.9869 31.4088Z"
                  fill="#5D8B2F"
                />
              </svg>
            </span>
          </div>
        </div>
      )}
    </div>
  );
};

export default SocialAuthLayout;
